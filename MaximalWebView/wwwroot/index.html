<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Hello, world!</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="./tailwind.css" />
    <script src="https://unpkg.com/ag-grid-enterprise/dist/ag-grid-enterprise.min.noStyle.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-grid.css">
    <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-theme-balham-dark.css">
</head>

<body class="p-5 bg-gray-900 text-indigo-200">
    <h1 class="mb-5 font-mono text-indigo-400 text-5xl">Hello, üåç! üôã‚ÄçüíæüìÄ</h1>
    <p class="mb-9 ">This is a tiny .NET 6 Windows application hosting web UI in WebView2. No WinForms, no WPF, no WinUI - just a Win32 message pump. It has hot reload integrated with <a href="https://tailwindcss.com" target="_blank" class="underline text-indigo-400">Tailwind CSS</a>.</p>


    <button id="btn1" class="bg-indigo-600 hover:bg-indigo-800 text-white font-bold py-2 px-4 rounded-full self-center">Click me to demo .NET-JS interop!</button>

    <div class="border border-gray-500 text-sm">
        <div id="header" class="bg-gray-800 text-gray-200 grid" style="grid-template-columns: 100px 1fr auto">
            <span class="m-1 ml-2 font-sans">Output</span>
            <span onclick="window.chrome.webview.postMessage('‚ùå‚úñ‚ùé')" class="m-1" style="grid-column: 3">‚úñ</span>
        </div>
        <div id="body" class="m-1 ml-2 font-mono  text-gray-100">
            <div>FileSystemEvent: Changed tailwind.css</div>
            <div>FileSystemEvent: Changed tailwind.css</div>
            <div>The thread 0x3a4c has exited with code 0 (0x0).</div>
        </div>
    </div>

    <div id="myGrid" class="ag-theme-balham-dark" style="height: 600px"></div>

    

    <script>
        btn1.onclick = (event) => {
            window.chrome.webview.postMessage("üòéüíæüòé");
        }

        document.addEventListener('DOMContentLoaded', async () => {
            const columnDefs = [
                { headerName: 'Name', field: "name", sortable: true, checkboxSelection: true },
                { headerName: 'Artist', field: "artist", sortable: true },
                { headerName: 'Album/Show', field: "album", sortable: true },
                { headerName: 'Plays', field: "plays", sortable: true },
                { headerName: 'Date Added', field: "dateAdded", sortable: true },
            ];

            let response = await fetch("https://maximalwebview.example/data.json");
            let rowData = await response.json();

            console.log({ rowData });

            // let the grid know which columns and what data to use
            const gridOptions = {
                columnDefs: columnDefs,
                rowData: rowData,
                //enableRangeSelection: true,
                rowSelection: 'multiple'
            };

            // lookup the container we want the Grid to use
            const eGridDiv = document.querySelector('#myGrid');

            // create the grid passing in the div to use together with the columns & data we want to use
            new agGrid.Grid(eGridDiv, gridOptions);
        });

    </script>
</body>

</html>